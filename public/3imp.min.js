var scene=new THREE.Scene,camera=new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);camera.position.z=3;var directionalLight=new THREE.DirectionalLight(16777215,5);directionalLight.position.z=3,scene.add(directionalLight);var renderer=new THREE.WebGLRenderer({alpha:!0});renderer.setSize(window.innerWidth,window.innerHeight),document.body.appendChild(renderer.domElement);var objectsToDrawTogether=new THREE.Group,loader=new THREE.OBJLoader;loader.load("model.obj",function(e){var n=new THREE.MeshStandardMaterial({color:1842462});e.traverse(function(e){e instanceof THREE.Mesh&&(e.material=n)}),objectsToDrawTogether.add(e),scene.add(objectsToDrawTogether),render()});var deviceOrientationData={alpha:0,beta:0,gamma:0},gyro={x:0,y:0,z:0,w:0},degtorad=Math.PI/180;window.DeviceOrientationEvent&&"ontouchstart"in window&&window.addEventListener("deviceorientation",function(e){gyro=computeQuaternionFromEulers((deviceOrientationData=e).alpha,deviceOrientationData.beta,deviceOrientationData.gamma)},!0);var currentScreenOrientation=window.orientation||0;function computeQuaternionFromEulers(e,n,r){var t=n*degtorad,a=r*degtorad,i=e*degtorad,o=Math.cos(t/2),d=Math.cos(a/2),c=Math.cos(i/2),w=Math.sin(t/2),s=Math.sin(a/2),u=Math.sin(i/2);return{x:w*d*c-o*s*u,y:o*s*c+w*d*u,z:o*d*u+w*s*c,w:o*d*c-w*s*u}}function inverseQuaternion(e){return{x:e.x,y:e.y,z:e.z,w:-e.w}}function computeOrientationQuaternion(){return inverseQuaternion(gyro)}function render(){requestAnimationFrame(render);var e=computeOrientationQuaternion(),n=new THREE.Quaternion;n.set(e.x,e.y,e.z,e.w),objectsToDrawTogether.setRotationFromQuaternion(n),renderer.render(scene,camera)}window.addEventListener("orientationchange",function(){currentScreenOrientation=window.orientation},!1);
